---
import { client } from "@/lib/contentful";
import type { ICareer } from "@/lib/interface";
import LearnButton from "../ui/learnButton";
import ImageCarousel from "../imageCarousel";

const careerData = await client.withoutUnresolvableLinks.getEntry<ICareer>(
  "1d9TUEQGK5lJ4QajdGSfHQ"
);

type AssetFields = {
  file: {
    url: string;
  };
  title?: string;
  description?: string;
};

// Ensure `images` is an array and handle undefined
const images = (careerData.fields.images || []) as { fields: AssetFields }[];
---

<section>
  <div class="grid md:grid-cols-2 grid-cols-1 justify-items-end gap-5">
    <div>
      <h2 class="text-3xl font-bold sm:text-4xl">{careerData.fields.title}</h2>
    </div>
    <div class="space-y-5">
      <p class="text-lg">{careerData.fields.shortDescription}</p>

      <LearnButton deg={false} href="/career" text_color="text-black" text={careerData.fields.buttonText}>
    </div>
  </div>

  <div class="my-16">
    <ImageCarousel images={images} client:only="React"/>
  </div>

  <!-- <div class="my-16 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5">
    {images.map((image, index) => {
      const imageUrl = image.fields.file.url;
      const imageTitle = image.fields.title || `Image ${index + 1}`;
      const imageAlt = image.fields.description || imageTitle;

      return (
        <div >
          <img
            src={imageUrl}
            alt={imageAlt}
            title={imageTitle}
            class="rounded-lg object-cover w-full h-full min-h-[300px] "
          />
        </div>
      );
    })}
  </div> -->
</section>