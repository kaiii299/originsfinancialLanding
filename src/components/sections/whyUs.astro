---
import { client } from "@/lib/contentful";
import type { IWhyUs } from "@/lib/interface";
import { CustomIcon } from "../customIcon";
import { Image } from "astro:assets";

const whyUsData = await client.withoutUnresolvableLinks.getEntries<IWhyUs>({
  content_type: "whyUs",
  order: "fields.index" as any,
});
---

<section class="space-y-10">
  <div>
    <h2 class="font-bold text-3xl">Why us?</h2>
  </div>

  <div class="grid md:grid-cols-3 grid-cols-1 gap-10 md:gap-6">
    {
      whyUsData.items.map((data) =>
        data.fields.description ? (
          <div
            style={{ backgroundColor: data.fields.cardColor }}
            class="h-full w-full rounded-lg flex flex-col justify-between p-5"
          >
            <div>
              <CustomIcon iconName={data.fields.icon} size="55" />
            </div>
            <div>
              <p class="text-2xl">{data.fields.description}</p>
            </div>
          </div>
        ) : (
          <Image
            src={`${data.fields.image?.fields.file?.url}`}
            title={`${data.fields.image?.fields.file?.url}`}
            alt={`${data.fields.image?.fields.file?.url}`}
            width={600}
            height={600}
            draggable={false}
            loading="lazy"
            format={"webp"}
            class="md:flex hidden rounded-lg min-h-[350px] max-h-[360px] h-full w-full object-cover"
          />
        )
      )
    }
  </div>
</section>
